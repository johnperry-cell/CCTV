@theme inline {
  --dots-color: var(--color-neutral-600);
}

.dark {
  --dots-color: var(--color-neutral-400);
}

.bg-dots {
  position: relative;
  z-index: 0;
  overflow: hidden;

  /* Background layer (farthest) */
  background-image: radial-gradient(
    circle,
    color-mix(in oklab, var(--dots-color) 60%, transparent) 0.04rem,
    transparent 0.08rem
  );
  background-size: 8rem 8rem;
  background-repeat: repeat;
  animation: dots-chaos-bg 60s ease-in-out infinite;
  transform-origin: center;
  animation-delay: calc(var(--bg-delay, 0) * 1s);
}

.bg-dots::before,
.bg-dots::after {
  content: "";
  position: absolute;
  inset: 0;
  pointer-events: none;
  background-repeat: repeat;
  z-index: -1;
  transform-origin: center;
}

/* Foreground layer (closest, fastest) */
.bg-dots::before {
  background-image: radial-gradient(
    circle,
    color-mix(in oklab, var(--dots-color) 80%, transparent) 0.08rem,
    transparent 0.12rem
  );
  background-size: 4rem 4rem;
  animation: dots-chaos-fg 20s ease-in-out infinite;
  opacity: 0.9;
  animation-delay: calc(var(--fg-delay, 0) * 1s);
}

/* Midground layer (medium speed) */
.bg-dots::after {
  background-image: radial-gradient(
    circle,
    color-mix(in oklab, var(--dots-color) 90%, transparent) 0.06rem,
    transparent 0.1rem
  );
  background-size: 6rem 6rem;
  animation: dots-chaos-mg 40s ease-in-out infinite;
  opacity: 0.7;
  animation-delay: calc(var(--mg-delay, 0) * 1s);
}
/* Foreground chaotic swirl — more unpredictable */
@keyframes dots-chaos-fg {
  0% {
    background-position: 0 0;
    opacity: 0.9;
    transform: scale(1) rotate(0deg);
  }
  13% {
    background-position: 7rem -4rem;
    opacity: 0.5;
    transform: scale(1.08) rotate(7deg);
  }
  27% {
    background-position: -6rem 9rem;
    opacity: 0.7;
    transform: scale(0.95) rotate(-5deg);
  }
  41% {
    background-position: 12rem 3rem;
    opacity: 1;
    transform: scale(1.12) rotate(11deg);
  }
  58% {
    background-position: -8rem -5rem;
    opacity: 0.4;
    transform: scale(1.03) rotate(-8deg);
  }
  76% {
    background-position: 5rem 8rem;
    opacity: 0.85;
    transform: scale(1.07) rotate(5deg);
  }
  100% {
    background-position: 0 0;
    opacity: 0.9;
    transform: scale(1) rotate(0deg);
  }
}

/* Midground chaotic swirl — staggered timing */
@keyframes dots-chaos-mg {
  0% {
    background-position: 0 0;
    opacity: 0.7;
    transform: scale(1) rotate(0deg);
  }
  18% {
    background-position: -4rem 5rem;
    opacity: 0.4;
    transform: scale(1.05) rotate(-4deg);
  }
  37% {
    background-position: 8rem -6rem;
    opacity: 0.8;
    transform: scale(0.97) rotate(6deg);
  }
  55% {
    background-position: -9rem 10rem;
    opacity: 0.6;
    transform: scale(1.02) rotate(-6deg);
  }
  79% {
    background-position: 6rem -3rem;
    opacity: 0.5;
    transform: scale(1.04) rotate(4deg);
  }
  100% {
    background-position: 0 0;
    opacity: 0.7;
    transform: scale(1) rotate(0deg);
  }
}

/* Background chaotic swirl — slow, uneven drift */
@keyframes dots-chaos-bg {
  0% {
    background-position: 0 0;
    opacity: 0.4;
    transform: scale(1) rotate(0deg);
  }
  21% {
    background-position: 4rem -7rem;
    opacity: 0.3;
    transform: scale(1.06) rotate(3deg);
  }
  46% {
    background-position: -5rem 8rem;
    opacity: 0.5;
    transform: scale(0.98) rotate(-2deg);
  }
  68% {
    background-position: 7rem -4rem;
    opacity: 0.2;
    transform: scale(1.04) rotate(5deg);
  }
  100% {
    background-position: 0 0;
    opacity: 0.4;
    transform: scale(1) rotate(0deg);
  }
}
